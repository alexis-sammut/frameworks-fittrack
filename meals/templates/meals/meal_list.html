{% extends "base.html" %} {% block main %}
<section class="section">
  {% for meal in meals %}
  <a href="{% url 'meal-detail' meal.pk %}" class="list-item-link">
    <div class="container">
      <div class="list-item">
        <div class="list-item-header">
          <span class="list-item-name">{{ meal.name|capfirst }}</span>
          <span class="list-item-date">{{meal.date}}</span>

          <div class="actions">
            <a href="{% url 'meal-update' meal.pk %}">
              <img
                src="/static/images/edit.png"
                alt="Edit information Icon"
                id="editBtn"
              />
            </a>
            <img
              src="/static/images/delete.png"
              alt="Delete Meal Icon"
              class="deleteBtn"
              data-meal-id="{{ meal.pk }}"
              data-meal-name="{{ meal.name|capfirst }}"
            />
          </div>
        </div>

        <div class="nutrition-summary">
          <div class="stats-grid-meal">
            <div class="stat-box amount-colour">
              <p>Total Weight</p>
              <div class="data">
                <span class="stat-value">{{ meal.total_weight|floatformat:1 }}</span>
                <span class="unit">g</span>
              </div>
            </div>
            <div class="stat-box fat-colour">
              <p>Total Fat</p>
              <div class="data">
                <span class="stat-value">{{ meal.total_total_fat|floatformat:1 }}</span>
                <span class="unit">g</span>
              </div>
            </div>
            <div class="stat-box fat-colour">
              <p>Saturated Fat</p>
              <div class="data">
                <span class="stat-value">{{ meal.total_saturated_fat|floatformat:1 }}</span>
                <span class="unit">g</span>
              </div>
            </div>
            <div class="stat-box carbs-colour">
              <p>Total Carbs</p>
              <div class="data">
                <span class="stat-value">{{ meal.total_total_carbs|floatformat:1 }}</span>
                <span class="unit">g</span>
              </div>
            </div>
            <div class="stat-box carbs-colour">
              <p>Fiber</p>
              <div class="data">
                <span class="stat-value">{{ meal.total_fiber|floatformat:1 }}</span>
                <span class="unit">g</span>
              </div>
            </div>
            <div class="stat-box carbs-colour">
              <p>Sugar</p>
              <div class="data">
                <span class="stat-value">{{ meal.total_sugar|floatformat:1 }}</span>
                <span class="unit">g</span>
              </div>
            </div>
            <div class="stat-box micronutrients-colour">
              <p>Sodium</p>
              <div class="data">
                <span class="stat-value">{{ meal.total_sodium|floatformat:1 }}</span>
                <span class="unit">mg</span>
              </div>
            </div>
            <div class="stat-box micronutrients-colour">
              <p>Potassium</p>
              <div class="data">
                <span class="stat-value">{{ meal.total_potassium|floatformat:1 }}</span>
                <span class="unit">mg</span>
              </div>
            </div>
            <div class="stat-box micronutrients-colour">
              <p>Cholesterol</p>
              <div class="data">
                <span class="stat-value">{{ meal.total_cholesterol|floatformat:1 }}</span>
                <span class="unit">mg</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </a>
  {% endfor %}
</section>

{% for meal in meals %}
<div id="deleteItem-{{ meal.pk }}" class="popup-form" style="display: none">
  <div class="form-content">
    <span class="close-button">&times;</span>
    <h3>Delete Meal</h3>
    <p>Are you sure you want to delete "{{ meal.name|capfirst }}"?</p>
    <form method="POST" action="{% url 'meal-delete' meal.pk %}" style="display: inline;">
      {% csrf_token %}
      <button type="submit" class="button delete-button">Delete Meal</button>
    </form>
  </div>
</div>
{% endfor %}
<div class="detail-navigation">
  <a href="{% url 'log-meal'%}">
    <img src="/static/images/add.png" alt="Add icon" />
  </a>
</div>
{% endblock %}